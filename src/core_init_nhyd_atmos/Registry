%
% namelist  type  namelist_record  name  default_value
%
namelist integer   nhyd_model config_test_case            7
namelist character nhyd_model config_calendar_type        gregorian
namelist character nhyd_model config_start_time           none
namelist character nhyd_model config_stop_time            none
namelist integer   nhyd_model config_theta_adv_order      3
namelist real      nhyd_model config_coef_3rd_order       0.25
namelist integer   dimensions config_nvertlevels          26
namelist integer   dimensions config_nsoillevels          4
namelist integer   dimensions config_nfglevels            27
namelist integer   dimensions config_nfgsoillevels        4
namelist integer   dimensions config_months               12
namelist character data_sources config_geog_data_path     /mmm/users/wrfhelp/WPS_GEOG/
namelist character data_sources config_met_prefix         FILE
namelist character data_sources config_sfc_prefix         FILE
namelist integer   data_sources config_fg_interval        21600
namelist real      vertical_grid  config_ztop             28000.0
namelist integer   vertical_grid  config_nsmterrain       2
namelist logical   vertical_grid  config_smooth_surfaces  false
namelist logical   preproc_stages config_static_interp    true
namelist logical   preproc_stages config_vertical_grid    true
namelist logical   preproc_stages config_met_interp       true
namelist logical   preproc_stages config_input_sst        false
namelist logical   preproc_stages config_frac_seaice      false
namelist character io         config_input_name           grid.nc
namelist character io         config_sfc_update_name      sfc_update.nc
namelist character io         config_output_name          init.nc
namelist character io         config_restart_name         restart.nc
namelist integer   io         config_frames_per_outfile   0
namelist integer   io         config_pio_num_iotasks      0 
namelist integer   io         config_pio_stride           1
namelist character decomposition config_block_decomp_file_prefix  graph.info.part.
namelist integer   decomposition config_number_of_blocks          0
namelist logical   decomposition config_explicit_proc_decomp      .false.
namelist character decomposition config_proc_decomp_file_prefix   graph.info.part.
namelist integer   restart    config_restart_interval     0
namelist logical   restart    config_do_restart           false
namelist real      restart    config_restart_time         172800.0


%
% dim  type  name_in_file  name_in_code
%
dim nCells nCells
dim nEdges nEdges
dim maxEdges maxEdges
dim maxEdges2 maxEdges2
dim nVertices nVertices
dim TWO 2
dim THREE 3
dim vertexDegree vertexDegree
dim FIFTEEN 15
dim TWENTYONE 21
dim R3 3
dim nVertLevels namelist:config_nvertlevels
dim nSoilLevels namelist:config_nsoillevels
dim nFGLevels namelist:config_nfglevels
dim nFGSoilLevels namelist:config_nfgsoillevels
dim nVertLevelsP1 nVertLevels+1
dim nMonths namelist:config_months

%
% var  type  name_in_file  ( dims )  iro-  name_in_code super-array array_class
%
var persistent text    xtime ( Time ) 2 so xtime state - -

%  horizontal grid structure

var persistent real    latCell ( nCells ) 0 io latCell mesh - -
var persistent real    lonCell ( nCells ) 0 io lonCell mesh - -
var persistent real    xCell ( nCells ) 0 io xCell mesh - -
var persistent real    yCell ( nCells ) 0 io yCell mesh - -
var persistent real    zCell ( nCells ) 0 io zCell mesh - -
var persistent integer indexToCellID ( nCells ) 0 io indexToCellID mesh - -

var persistent real    latEdge ( nEdges ) 0 io latEdge mesh - -
var persistent real    lonEdge ( nEdges ) 0 io lonEdge mesh - -
var persistent real    xEdge ( nEdges ) 0 io xEdge mesh - -
var persistent real    yEdge ( nEdges ) 0 io yEdge mesh - -
var persistent real    zEdge ( nEdges ) 0 io zEdge mesh - -
var persistent integer indexToEdgeID ( nEdges ) 0 io indexToEdgeID mesh - -

var persistent real    latVertex ( nVertices ) 0 io latVertex mesh - -
var persistent real    lonVertex ( nVertices ) 0 io lonVertex mesh - -
var persistent real    xVertex ( nVertices ) 0 io xVertex mesh - -
var persistent real    yVertex ( nVertices ) 0 io yVertex mesh - -
var persistent real    zVertex ( nVertices ) 0 io zVertex mesh - -
var persistent integer indexToVertexID ( nVertices ) 0 io indexToVertexID mesh - -

var persistent integer cellsOnEdge ( TWO nEdges ) 0 io cellsOnEdge mesh - -
var persistent integer nEdgesOnCell ( nCells ) 0 io nEdgesOnCell mesh - -
var persistent integer nEdgesOnEdge ( nEdges ) 0 io nEdgesOnEdge mesh - -
var persistent integer edgesOnCell ( maxEdges nCells ) 0 io edgesOnCell mesh - -
var persistent integer edgesOnEdge ( maxEdges2 nEdges ) 0 io edgesOnEdge mesh - -

var persistent real    weightsOnEdge ( maxEdges2 nEdges ) 0 io weightsOnEdge mesh - -
var persistent real    dvEdge ( nEdges ) 0 io dvEdge mesh - -
var persistent real    dcEdge ( nEdges ) 0 io dcEdge mesh - -
var persistent real    angleEdge ( nEdges ) 0 io angleEdge mesh - -
var persistent real    areaCell ( nCells ) 0 io areaCell mesh - -
var persistent real    areaTriangle ( nVertices ) 0 io areaTriangle mesh - -

var persistent real    edgeNormalVectors ( R3 nEdges ) 0 io edgeNormalVectors mesh - -
var persistent real    localVerticalUnitVectors ( R3 nCells ) 0 io localVerticalUnitVectors mesh - -
var persistent real    cellTangentPlane ( R3 TWO nEdges ) 0 io cellTangentPlane mesh - -

var persistent integer cellsOnCell ( maxEdges nCells ) 0 io cellsOnCell mesh - -
var persistent integer verticesOnCell ( maxEdges nCells ) 0 io verticesOnCell mesh - -
var persistent integer verticesOnEdge ( TWO nEdges ) 0 io verticesOnEdge mesh - -
var persistent integer edgesOnVertex ( vertexDegree nVertices ) 0 io edgesOnVertex mesh - -
var persistent integer cellsOnVertex ( vertexDegree nVertices ) 0 io cellsOnVertex mesh - -
var persistent real    kiteAreasOnVertex ( vertexDegree nVertices ) 0 io kiteAreasOnVertex mesh - -
var persistent real    fEdge ( nEdges ) 0 io fEdge mesh - -
var persistent real    fVertex ( nVertices ) 0 io fVertex mesh - -
 
var persistent real    meshDensity ( nCells ) 0 iro meshDensity mesh - -

% some solver scalar coefficients

% coefficients for vertical extrapolation to the surface
var persistent real    cf1 ( ) 0 io cf1 mesh - -
var persistent real    cf2 ( ) 0 io cf2 mesh - -
var persistent real    cf3 ( ) 0 io cf3 mesh - -

% static terrestrial fields
var persistent real    ter         ( nCells ) 0 io ter      mesh - -
var persistent integer landmask    ( nCells ) 0 io landmask mesh - -
var persistent integer ivgtyp      ( nCells ) 0 io lu_index mesh - -
var persistent integer isltyp      ( nCells ) 0 io soilcat_top mesh - -
var persistent integer soilcat_bot ( nCells ) 0 io soilcat_bot mesh - -
var persistent real    snoalb      ( nCells ) 0 io snoalb mesh - -
var persistent real    soiltemp    ( nCells ) 0 io soiltemp mesh - -
var persistent real    greenfrac   ( nMonths nCells ) 0 io greenfrac mesh - -
var persistent real    shdmin      ( nCells ) 0 io shdmin mesh - -
var persistent real    shdmax      ( nCells ) 0 io shdmax mesh - -
var persistent real    albedo12m   ( nMonths nCells ) 0 io albedo12m mesh - -

% description of the vertical grid structure

var persistent real    hx ( nVertLevelsP1 nCells ) 0 io hx mesh - -
var persistent real    zgrid ( nVertLevelsP1 nCells ) 0 io zgrid mesh - -
var persistent real    rdzw ( nVertLevels ) 0 io rdzw mesh - -
var persistent real    dzu ( nVertLevels ) 0 io dzu mesh - -
var persistent real    rdzu ( nVertLevels ) 0 io rdzu mesh - -
var persistent real    fzm ( nVertLevels ) 0 io fzm mesh - -
var persistent real    fzp ( nVertLevels ) 0 io fzp mesh - -
var persistent real    zx ( nVertLevelsP1 nEdges ) 0 io zx mesh - -
var persistent real    zz ( nVertLevelsP1 nCells ) 0 io zz mesh - -
var persistent real    zb ( nVertLevelsP1 TWO nEdges ) 0 io zb mesh - -
var persistent real    zb3 ( nVertLevelsP1 TWO nEdges ) 0 io zb3 mesh - -

%  W-Rayleigh-damping coefficient

var persistent real    dss ( nVertLevels nCells ) 0 io dss mesh - -

% Horizontally interpolated from first-guess data
var persistent real    u_fg ( nFGLevels nEdges Time ) 1 - u fg - -
var persistent real    v_fg ( nFGLevels nEdges Time ) 1 - v fg - -
var persistent real    t_fg ( nFGLevels nCells Time ) 1 - t fg - -
var persistent real    p_fg ( nFGLevels nCells Time ) 1 - p fg - -
var persistent real    z_fg ( nFGLevels nCells Time ) 1 - z fg - -
var persistent real    rh_fg ( nFGLevels nCells Time ) 1 - rh fg - -
var persistent real    soilz_fg ( nCells Time ) 1 io soilz fg - -
var persistent real    psfc_fg ( nCells Time ) 1 - psfc fg - -
var persistent real    pmsl_fg ( nCells Time ) 1 - pmsl fg - -

% Horizontally interpolated from first-guess data
var persistent real    dz_fg  ( nFGSoilLevels nCells Time ) 1 io dz_fg  fg - -
var persistent real    dzs_fg ( nFGSoilLevels nCells Time ) 1 io dzs_fg fg - -
var persistent real    zs_fg  ( nFGSoilLevels nCells Time ) 1 io zs_fg  fg - -
var persistent real    st_fg  ( nFGSoilLevels nCells Time ) 1 io st_fg  fg - -
var persistent real    sm_fg  ( nFGSoilLevels nCells Time ) 1 io sm_fg  fg - -

% Horizontally interpolated from first-guess data
%    and should be read in by model
var persistent real    dz ( nSoilLevels nCells Time ) 1 io dz fg - -
var persistent real    dzs ( nSoilLevels nCells Time ) 1 io dzs fg - -
var persistent real    zs ( nSoilLevels nCells Time ) 1 io zs fg - -
var persistent real    sh2o ( nSoilLevels nCells Time ) 1 io sh2o fg - -
var persistent real    smois ( nSoilLevels nCells Time ) 1 io smois fg - -
var persistent real    tslb ( nSoilLevels nCells Time ) 1 io tslb fg - -
var persistent real    smcrel ( nSoilLevels nCells Time ) 1 io smcrel fg - -
var persistent real    tmn ( nCells Time ) 1 io tmn fg - -
var persistent real    skintemp ( nCells Time ) 1 io skintemp fg - -
var persistent real    sst ( nCells Time ) 1 iso sst fg - -
var persistent real    snow ( nCells Time ) 1 io snow fg - -
var persistent real    snowc ( nCells Time ) 1 io snowc fg - -
var persistent real    snowh ( nCells Time ) 1 io snowh fg - -
var persistent real    xice ( nCells Time ) 1 iso xice fg - -
var persistent real    seaice ( nCells Time ) 1 io seaice fg - -
var persistent real    gfs_z ( nVertLevels nCells Time ) 1 - gfs_z fg - -
var persistent real    vegfra ( nCells Time ) 1 io vegfra fg - -
var persistent real    sfc_albbck ( nCells Time ) 1 io sfc_albbck fg - -
var persistent real    xland ( nCells Time ) 1 io xland fg - - 

% Prognostic variables: read from input, saved in restart, and written to output
var persistent real    u ( nVertLevels nEdges Time ) 2 o u state - -
var persistent real    w ( nVertLevelsP1 nCells Time ) 2 o w state - -
var persistent real    rho_zz ( nVertLevels nCells Time ) 2 o rho_zz state - -
var persistent real    theta_m ( nVertLevels nCells Time ) 2 o theta_m state - -
var persistent real    qv ( nVertLevels nCells Time ) 2 o qv state scalars moist
var persistent real    qc ( nVertLevels nCells Time ) 2 o qc state scalars moist
var persistent real    qr ( nVertLevels nCells Time ) 2 o qr state scalars moist

% state variables diagnosed from prognostic state
var persistent real    pressure_p ( nVertLevels nCells Time ) 1 - pressure_p diag - -

var persistent real    u_init ( nVertLevels ) 0 io u_init mesh - -
var persistent real    t_init ( nVertLevels nCells ) 0 io t_init mesh - -
var persistent real    qv_init ( nVertLevels ) 0 io qv_init mesh - -

% Diagnostic fields: only written to output
var persistent real    rho ( nVertLevels nCells Time ) 1 o rho diag - -
var persistent real    theta ( nVertLevels nCells Time ) 1 o theta diag - -
var persistent real    v ( nVertLevels nEdges Time ) 1 o v diag - -
var persistent real    uReconstructX ( nVertLevels nCells Time ) 1 o uReconstructX diag - -
var persistent real    uReconstructY ( nVertLevels nCells Time ) 1 o uReconstructY diag - -
var persistent real    uReconstructZ ( nVertLevels nCells Time ) 1 o uReconstructZ diag - -
var persistent real    uReconstructZonal ( nVertLevels nCells Time ) 1 o uReconstructZonal diag - -
var persistent real    uReconstructMeridional ( nVertLevels nCells Time ) 1 o uReconstructMeridional diag - -

var persistent real    exner ( nVertLevels nCells Time ) 1 - exner diag - -
var persistent real    exner_base ( nVertLevels nCells Time ) 1 io exner_base diag - -
var persistent real    rtheta_base ( nVertLevels nCells Time ) 1 - rtheta_base diag - -
var persistent real    pressure ( nVertLevels nCells Time ) 1 - pressure diag - -
var persistent real    pressure_base ( nVertLevels nCells Time ) 1 io pressure_base diag - -
var persistent real    rho_base ( nVertLevels nCells Time ) 1 io rho_base diag - -
var persistent real    theta_base ( nVertLevels nCells Time ) 1 io theta_base diag - -

var persistent real    cqw  ( nVertLevels nCells Time ) 1 - cqw diag - -

var persistent real    surface_pressure    ( nCells Time    ) 1  io surface_pressure    diag - -

%  coupled variables needed by the solver, but not output...
var persistent real    ru ( nVertLevels nEdges Time ) 1 - ru diag - -
var persistent real    rw ( nVertLevelsP1 nCells Time ) 1 - rw diag - -
var persistent real    rtheta_p ( nVertLevels nCells Time ) 1 - rtheta_p diag - -
var persistent real    rho_p ( nVertLevels nCells Time ) 1 - rho_p diag - -

% Space needed for advection
var persistent real    deriv_two ( FIFTEEN TWO nEdges ) 0 io deriv_two mesh - -
var persistent integer advCells ( TWENTYONE nCells ) 0 io advCells mesh - -

% Space needed for deformation calculation weights
var persistent real    defc_a ( maxEdges nCells ) 0 io defc_a mesh - -
var persistent real    defc_b ( maxEdges nCells ) 0 io defc_b mesh - -

% Arrays required for reconstruction of velocity field
var persistent real    coeffs_reconstruct ( R3 maxEdges nCells ) 0 io coeffs_reconstruct mesh - -

